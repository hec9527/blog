---
title: å‰ç«¯å·¥ç¨‹åŒ–é…ç½®ï¼ˆäºŒï¼‰â€”â€” eslint
author: hec9527
author_title: å‰ç«¯åˆ‡å›¾å·¥ç¨‹å¸ˆ
author_url: https://github.com/hec9527
author_image_url: /img/avatar-circle.png
description: eslint
keywords: [javascript, å·¥ç¨‹åŒ–, å·¥å…·]
tags: [javascript, å·¥ç¨‹åŒ–, å·¥å…·]
# draft: true
# image:
---

ESLint æ˜¯ä¸€ä¸ªç”¨äº JavaScript å’Œ JSX ä»£ç é™æ€åˆ†æçš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…å‘ç°å’Œä¿®å¤ä»£ç ä¸­çš„é”™è¯¯ã€ä¸ä¸€è‡´æ€§ä»¥åŠæ½œåœ¨çš„é—®é¢˜ã€‚å®ƒå¯ä»¥æ£€æŸ¥ä»£ç ä¸­çš„è¯­æ³•é”™è¯¯ã€ç¼–ç è§„èŒƒé—®é¢˜å’Œæ½œåœ¨çš„é€»è¾‘é”™è¯¯ï¼Œå¸®åŠ©å›¢é˜Ÿä¿æŒä¸€è‡´çš„ä»£ç é£æ ¼ï¼Œå¹¶æé«˜ä»£ç è´¨é‡

![](img/2023-10-12-å‰ç«¯å·¥ç¨‹åŒ–_eslint/eslint.jpg)

<!-- truncate -->

eslint çš„ä¸»è¦åŠŸèƒ½æ˜¯ä»£ç è§„èŒƒæ£€æŸ¥ï¼Œå®ƒèƒ½å¤Ÿæ ¹æ®é¢„å®šä¹‰çš„è§„åˆ™å¯¹ js ä»£ç è¿›è¡Œé™æ€ä»£ç åˆ†æå’Œæ£€æŸ¥ï¼ŒåŠæ—¶å‘ç°æ½œåœ¨é—®é¢˜ã€‚å¦å¤–å®ƒæ”¯æŒæ’ä»¶å’Œé…ç½®ï¼Œå¯ä»¥æ ¹æ®è‡ªèº«éœ€è¦ç»“åˆç¤¾åŒºè§„åˆ™æ’ä»¶è¿›è¡Œé…ç½®ã€‚åœ¨å‰ç«¯å·¥ç¨‹åŒ–ä¸­ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿çš„é›†æˆåˆ°ç¼–è¾‘å™¨ä»¥åŠæ„å»ºæµç¨‹å½“ä¸­

## å®‰è£… & ä½¿ç”¨

åœ¨é¡¹ç›®ä¸­å®‰è£… eslint

```bash
npm install eslint --save-dev
```

### å‘½ä»¤è¡Œ

åœ¨é¡¹ç›®ä¸­å®‰è£… eslint ä¹‹åå¯ä»¥é€šè¿‡ä½¿ç”¨å‘½ä»¤è¡Œè¿›è¡Œæ£€æµ‹å’Œä¿®å¤ï¼ˆéå…¨å±€å®‰è£…ç›´æ¥æ‰§è¡Œä¼šæŠ¥æ‰¾ä¸åˆ° eslint, åœ¨ npm script ä¸­å¯ä»¥æ‰§è¡Œï¼‰

```bash
# æ£€æµ‹æ–‡ä»¶
eslint ./src/**/*.{js,jsx,ts,tsx}
# æ£€æµ‹å¹¶ä¿®å¤
eslint ./src/**/*.{js,jsx,ts,tsx} --fix
```

### vscode æ’ä»¶

é€šå¸¸åœ¨ vscode ä¸­ä¼šæ­é… ESLint æ’ä»¶æ¥ä½¿ç”¨ï¼Œåœ¨ vscode æ’ä»¶å¸‚åœºæœç´¢å®‰è£…åï¼Œvscode ä¼šå®æ—¶æ˜¾ç¤º lint ä¿¡æ¯ï¼Œè€Œä¸ç”¨æ¯æ¬¡æ‰‹åŠ¨ lint æ–‡ä»¶ã€‚

![](img/2023-10-12-å‰ç«¯å·¥ç¨‹åŒ–_eslint/eslint_vscode.jpg)

åœ¨ vscode é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼Œåœ¨æ¯æ¬¡ä¿å­˜åè‡ªåŠ¨ä¿®å¤ lint é—®é¢˜

```json
{
  "editor.codeActionsOnSave": {
    "source.fixAll": true,
    "source.fixAll.lint": true
  }
}
```

## é…ç½® eslint

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º `eslint` é…ç½®æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä»¥ä¸‹å†…å®¹ã€‚æˆ–è€…ä½¿ç”¨ `npm init @eslint/config` äº¤äº’å¼åˆ›å»º `eslint` é…ç½®æ–‡ä»¶ï¼ˆ**æ¨è**æ–¹å¼ ğŸ‘ğŸ»ï¼‰

é…ç½®æ–‡ä»¶é€šå¸¸ä¸º `.eslintrc`ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åœ¨ `package.json` ä¸­æ·»åŠ  `eslintConfig` é…ç½®é¡¹æ¥é…ç½® `eslint`ã€‚

```js
{
    "env": {
        "browser": true,
        "es2021": true
    },
    "extends": [
        "eslint:recommended",
        "plugin:@typescript-eslint/recommended",
        "plugin:react/recommended"
    ],
    "parser": "@typescript-eslint/parser",
    "parserOptions": {
        "ecmaVersion": "latest",
        "sourceType": "module"
    },
    "plugins": [
        "@typescript-eslint",
        "react"
    ],
    "rules": {
    }
}
```

eslint é…ç½®æ–‡ä»¶æ ¼å¼æœ‰å¤šç§ï¼Œä½†æ˜¯åªä¼šä½¿ç”¨å…¶ä¸­ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œä¼˜å…ˆçº§å¦‚ä¸‹

```text
.eslintrc.js
.eslintrc.cjs
.eslintrc.yaml
.eslintrc.yml
.eslintrc.json
package.json
```

## é…ç½®é¡¹

### ç¯å¢ƒé…ç½®ï¼ˆenvï¼‰

æŒ‡å®šä»£ç è¿è¡Œçš„å®¿ä¸»ç¯å¢ƒï¼Œæ¯”å¦‚ Node.jsã€æµè§ˆå™¨ã€ES6ã€CommonJS ç­‰ã€‚é…ç½®å¯¹åº”ç¯å¢ƒåä½¿ç”¨å…¶ä¸­çš„è¯­æ³•ã€ç‰¹æ€§ã€å…¨å±€å˜é‡ä¸ä¼šæŠ¥é”™

```json
{
  "env": {
    "browser": true,
    "node": true,
    "es6": true,
    "commonjs": true
  }
}
```

### å…¨å±€å˜é‡ï¼ˆglobalsï¼‰

æŒ‡å®šå…¨å±€å˜é‡ï¼Œæ¯”å¦‚ jQuery æˆ–è€… Reactï¼Œé€šè¿‡é…ç½®å…¨å±€å˜é‡æ¥é¿å… eslint å°†å…¶è§†ä¸ºæœªå®šä¹‰çš„å˜é‡ã€‚

> å…¶å€¼ä¸º `true` è¡¨ç¤ºè¯¥å…¨å±€å˜é‡å¯è¯»å¯å†™ï¼Œä¸º `false` è¡¨ç¤ºå¯è¯»ä¸å¯å†™

```json
{
  "globals": {
    "jQuery": true,
    "React": false
  }
}
```

### è§£æå™¨ï¼ˆparserï¼‰

è§£æå™¨æ˜¯ç”¨äºåˆ†æå’Œç†è§£ä»£ç çš„å·¥å…·ï¼Œè§£æå™¨å°†ä»£ç è½¬æ¢ä¸ºæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œä»¥ä¾¿ eslint èƒ½åœ¨å…¶åŸºç¡€ä¸Šè¿›è¡Œé™æ€åˆ†æå’Œè§„åˆ™æ£€æŸ¥ã€‚

- `Espree`ï¼šä¸€ä¸ªè½»é‡ã€å¿«é€Ÿçš„è§£æå™¨ï¼Œ æ˜¯ eslint é»˜è®¤è§£æå™¨ã€‚è‡³æ­¤ es5ã€es6ã€es7 ç­‰å¤šä¸ªç‰ˆæœ¬
- `@typescript-eslint/parser`ï¼šTypeScript è§£æå™¨ï¼Œå®ƒå¯ä»¥è§£æ ts çš„è¯­æ³•ä¸ªæ³¨è§£
- `@babel/eslint-parser`ï¼šä¸ä»…æ”¯æŒæœ€æ–°çš„ Es è¯­æ³•ï¼Œè¿˜æ”¯æŒåœ¨å®ç°æ€§è´¨ä¸­çš„è¯­æ³•ä»¥åŠ typescriptã€flow
- `vue-eslint-parser`ï¼šä¸“é—¨ç”¨äºè§£æ Vue å•æ–‡ä»¶ç»„ä»¶çš„è§£æå™¨ï¼Œå®ƒèƒ½å¤Ÿè§£æ Vue çš„æ¨¡æ¿ã€è„šæœ¬å’Œæ ·å¼ï¼Œå¹¶æä¾›å¯¹ Vue ç‰¹å®šè¯­æ³•çš„æ”¯æŒ

```json title=".eslintrc"
{
  "parser": "@typescript-eslint/parser"
}
```

#### è§£æå™¨é€‰é¡¹ï¼ˆparserOptionsï¼‰

è§£æå™¨é€‰é¡¹æ˜¯ç”¨äºé…ç½®è§£æå™¨çš„é€‰é¡¹ï¼Œæ¯”å¦‚æŒ‡å®šè§£æå™¨çš„ç‰ˆæœ¬ï¼ŒæŒ‡å®šè§£æå™¨çš„æºç ç±»å‹ç­‰ã€‚

```json
{
  "parserOptions": {
    "ecmaVersion": "esnext",
    "sourceType": "module", // or script
    // ä½¿ç”¨çš„é¢å¤–çš„è¯­è¨€ç‰¹æ€§  å¦‚jsxã€tsx
    "ecmaFeatures": {
      "jsx": true,
      "tsx": true
    }
  }
}
```

### ç»§æ‰¿(extends)å’Œæ’ä»¶(plugins)

eslint çš„è§„åˆ™å¤ªå¤šäº†ï¼Œä»¥è‡³äºä»å¤´é…ç½®ä¸€ä¸ªé¡¹ç›®æ˜¯å¦‚æ­¤çš„éº»çƒ¦ï¼Œå¥½åœ¨ç¤¾åŒºæœ‰éå¸¸å¤šçš„é…ç½®å¯ä»¥ä½¿ç”¨ï¼Œæˆ‘ä»¬åªéœ€è¦ç»§æ‰¿ä»–ä»¬çš„è§„åˆ™ï¼Œç„¶åå†æ ¹æ®éœ€è¦è¿›è¡Œä¿®æ”¹å³å¯ã€‚

`extends` ç”¨äºç»§æ‰¿åˆ«äººå†™å¥½çš„é…ç½®è§„èŒƒï¼Œå®ƒå¯ä»¥é…ç½®ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…å­—ç¬¦ä¸²æ•°æ®ï¼Œç”¨äºåŒ¹é…å¯¹åº”çš„è§„åˆ™ã€‚ç»§æ‰¿çš„è§„åˆ™å¯ä»¥åœ¨ rules å±æ€§ä¸­è¿›è¡Œæ‰©å±•æˆ–è€…è¦†ç›–

#### extends

`eslint` å†…ç½®äº†ä¸€å¥—è§„åˆ™åˆ†ä¸º `recommended` å’Œ `all`ï¼Œ `recommended` åŒ…å«äº†æœ€å¸¸ç”¨çš„è§„åˆ™ï¼Œæ¯”å¦‚ `no-console`ã€`no-debugger`ã€`no-alert` ç­‰, `all` åˆ™åŒ…å«äº†å½“å‰ç‰ˆæœ¬çš„æ‰€æœ‰æ ¸å¿ƒè§„åˆ™ï¼Œall ä¼šéšç€ç‰ˆæœ¬æ›´æ–°è€Œä¾¿è·Ÿï¼Œä¸å»ºè®®ç›´æ¥ä½¿ç”¨åˆ°ç”Ÿäº§ç¯å¢ƒ

```json
{
  "extends": ["eslint:recommended"]
}
```

å½“ç„¶é™¤äº†å†…ç½®çš„ eslint è§„åˆ™å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç»§æ‰¿å¤–éƒ¨çš„è§„åˆ™ï¼Œæ¯”å¦‚ `airbnb` è§„åˆ™ï¼Œå®ƒåŒ…å«äº†å¾ˆå¤šçš„è§„åˆ™ï¼Œå¹¶ä¸”æœ‰å¯¹åº”çš„æ’ä»¶ã€‚

å®‰è£… `eslint-config-airbnb` åï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®å³å¯

```json
{
  "extends": ["airbnb"]
}
```

å¦å¤–ï¼Œeslint è§„åˆ™ä¸­æœ‰å¾ˆå¤šåŒ…å«ä»£ç æ ¼å¼åŒ–çš„è§„åˆ™ï¼Œè¿™äº›è§„åˆ™å¯èƒ½ä¼šè·Ÿå¸¸ç”¨çš„ prettier è§„åˆ™æœ‰å†²çªï¼Œè¿™æ˜¯åæˆ‘ä»¬å¯èƒ½ä¼šå¸Œæœ›ä»¥ prettier é…ç½®ä¸ºå‡†ï¼Œé‚£ä¹ˆå¯ä»¥å°è¯•ä½¿ç”¨ `eslint-config-prettier`ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬å…³é—­æ‰€æœ‰ä¸ prettier æœ‰å†²çªçš„è§„åˆ™ã€‚

æŸäº›æ’ä»¶ä¹Ÿä¼šå¯¼å‡ºä¸€äº›è§„åˆ™ï¼Œæ¯”å¦‚ `eslint-plugin-react`ï¼Œå®ƒä¼šå¯¼å‡º `react/recommended` è§„åˆ™ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ  `plugin:react/recommended` å³å¯ã€‚

```json
{
  "plugins": ["plugin:react/recommended"]
}
```

ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ eslint é…ç½®åŒ…

| åç§°                      | ä½œç”¨                           |
| ------------------------- | ------------------------------ |
| eslint-config-airbnb      | åŒ…å«äº† airbnb è§„åˆ™             |
| eslint-config-prettier    | è§£å†³ eslint å’Œ prettier çš„å†²çª |
| eslint-plugin-import      | åŒ…å«äº†æ¨¡å—å¯¼å…¥ã€å¯¼å‡ºç›¸å…³çš„è§„åˆ™ |
| eslint-plugin-react       | åŒ…å« React ç›¸å…³è§„åˆ™            |
| eslint-plugin-react-hooks | åŒ…å« react hook ç›¸å…³è§„åˆ™       |
| eslint-plugin-vue         | åŒ…å« vue çš„ç›¸å…³è§„åˆ™            |

#### plugins

eslint æ”¯æŒä½¿ç”¨ç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œå…è®¸æ‰©å±• eslint çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ï¼šæ·»åŠ é¢å¤–çš„è§„åˆ™ã€è§£æå™¨ã€é¢„å¤„ç†å™¨ç­‰ã€‚åœ¨ä½¿ç”¨æ’ä»¶æ—¶å¯ä»¥çœç•¥ `eslint-plugin-`

```json
{
  "plugins": ["react", "react-hooks", "@typescript-eslint"]
}
```

### è§„åˆ™ï¼ˆrulesï¼‰

eslint é™„å¸¦äº†å¤§é‡çš„è§„åˆ™ï¼Œç”¨äºå®šä¹‰ä»£ç çš„è§„èŒƒå’Œé£æ ¼ã€‚è§„åˆ™å‘Šè¯‰ eslint åº”è¯¥å¯¹å“ªäº›ä»£ç å‘å‡ºè­¦å‘Šæˆ–é”™è¯¯ï¼Œå¯ä»¥æ ¹æ®è‡ªèº«éœ€æ±‚è¿›è¡Œé…ç½®

- `off | 0 `ï¼šå…³é—­è§„åˆ™
- `warn | 1`ï¼š è§¦å‘è§„åˆ™åè­¦å‘Š
- `error | 2`ï¼šè§¦å‘è§„åˆ™åæŠ¥å‘Šé”™è¯¯

## ç¦ç”¨è§„åˆ™

æœ‰æ—¶å€™ eslint æŠ¥å‘Šäº†æŸäº›é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸æ‰“ç®—å¤„ç†å®ƒï¼Œæˆ–è€…åªæ˜¯æƒ³æš‚æ—¶å…³é—­å®ƒï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `eslint-disable` æ³¨é‡Šæ¥ç¦ç”¨è§„åˆ™ã€‚

```js
// eslint-disable-next-line no-alert
alert('hello');
```

å¦‚æœé¡¹ç›®ä¸­æŸäº›æ–‡ä»¶æˆ–è€…ç›®å½•ä¸å¸Œæœ› eslint å»æ ¡éªŒï¼Œå¯ä»¥åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.eslintignore` æ–‡ä»¶æ¥å‘Šè¯‰ eslint è¿™äº›æ–‡ä»¶æˆ–è€…ç›®å½•ä¸ç”¨æ ¡éªŒã€‚

```bash
# å¿½ç•¥æ‰€æœ‰node_modulesç›®å½•ä¸‹çš„æ–‡ä»¶
node_modules
# å¿½ç•¥æ‰€æœ‰distç›®å½•ä¸‹çš„æ–‡ä»¶
dist
# å¿½ç•¥ä»»æ„å±‚çº§çš„typesç›®å½•
**/types
```

:::info

ä»é›¶å¼€å§‹é…ç½® eslint æ¯”è¾ƒéº»çƒ¦ï¼Œeslint å®˜æ–¹æä¾›çš„åˆå§‹åŒ–å·¥å…·å¯ä»¥éå¸¸æ–¹ä¾¿çš„åˆå§‹åŒ–é¡¹ç›®é…ç½®

```bash
npm init @eslint/config
# æˆ–è€…
npx eslint --init
```

:::
