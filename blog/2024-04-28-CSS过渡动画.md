---
title: è¶…ç‚«é…·çš„é¡µé¢åˆ‡æ¢æ•ˆæœ
author: hec9527
author_title: å‰ç«¯åˆ‡å›¾å·¥ç¨‹å¸ˆ
author_url: https://github.com/hec9527
author_image_url: /img/avatar-circle.png
description: CSSè¿‡åº¦åŠ¨ç”»
keywords: [html,css]
tags: [html,css]
# draft: true
# image: 
---

![](./img/2024-04-28-CSSè¿‡æ¸¡åŠ¨ç”»/tdesign.jpg)

ä»Šå¤©åœ¨çœ‹è…¾è®¯å‡ºå“çš„TDesignç»„ä»¶åº“çš„æ—¶å€™ï¼Œæ— æ„é—´å‘ç°ä»–ä»¬çš„è¿™ä¸ªä¸»é¢˜åˆ‡æ¢éå¸¸ç‚«é…·ï¼Œç°åœ¨ä¸»æµçš„ä¸»é¢˜åˆ‡æ¢å®ç°å°±æ˜¯ä½¿ç”¨CSSå˜é‡ï¼Œå½“ç‚¹å‡»åˆ‡æ¢ä¸»é¢˜çš„æ—¶å€™ï¼Œé€šè¿‡CSSå˜é‡æ¥åˆ‡æ¢ä¸»é¢˜ï¼Œå®ç°èµ·æ¥åŸç†éå¸¸ç®€å•ï¼Œä½†æ˜¯è¿™ç§å®ç°æ–¹å¼é¡µé¢çš„å…ƒç´ éƒ½æ˜¯ç»Ÿä¸€åˆ‡æ¢çš„ï¼Œåšä¸åˆ°è…¾è®¯TDesignè¿™ç§æ•ˆæœï¼Œåœ¨ç®€å•æŸ¥çœ‹å…¶é¡µé¢åå‘ç°ä¸€ä¸ªå¤§ç§˜å¯†...

<!-- truncate -->

## æ•ˆæœå±•ç¤º

å…ˆç®€å•çœ‹çœ‹è…¾è®¯ç»„ä»¶åº“å¦‚ä¸èˆ¬é¡ºæ»‘çš„åˆ‡æ¢æ•ˆæœï¼Œå¦‚æœè§†é¢‘ä¸èƒ½æ‰“å¼€ï¼Œå¯ä»¥ç›´æ¥è®¿é—® TDesign ç»„ä»¶åº“

ğŸ‘‰ğŸ» [TDesign ç»„ä»¶åº“](https://tdesign.tencent.com/)

<video autoPlay muted loop style={{"width":"100%"}}>
  <source src="/video/tdesign.mov" type="video/mp4" />
</video>

## åŸç†åˆ†æ

å®ƒè¿™é‡Œå…¶å®æ˜¯ä½¿ç”¨äº†ä¸€ä¸ªDOMæä¾›çš„å«åš `View Transitions API` çš„APIï¼Œ è¿™ä¸ªAPIæä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå®ƒå¯ä»¥åœ¨æ›´æ–°DOMå†…å®¹çš„åŒæ—¶ï¼Œè½»æ¾åœ°åˆ›å»ºä¸åŒDOMçŠ¶æ€ä¹‹é—´çš„è¿‡æ¸¡åŠ¨ç”»ï¼ŒåŒæ—¶è¿˜æä¾›äº†ä¸åŒé˜¶æ®µçš„Promiseï¼Œå…è®¸åœ¨è§†å›¾åˆ°è¾¾æŒ‡å®šé˜¶æ®µè¿è¡Œä»£ç ã€‚å®ƒçš„ç”¨æ³•å¦‚ä¸‹:

```js
const transition = document.startViewTransition(callback);
```

æµè§ˆå™¨ä¼šåœ¨æ‰§è¡Œ`startViewTransition`æ—¶å¯¹å½“å‰å±å¹•æˆªå›¾ï¼Œ ç„¶åæ‰§è¡Œcallbackå›è°ƒï¼Œé€šå¸¸ä¼šåœ¨è¿™é‡Œæ‰§è¡Œæ”¹å˜é¡µé¢çŠ¶æ€çš„ä»£ç ï¼Œç„¶åæ•è·é¡µé¢çš„æœ€æ–°çŠ¶æ€å¹¶ä¸”å®æ—¶å±•ç¤º

æ€»çš„æ¥è¯´ï¼Œä»–çš„æµç¨‹å°±æ˜¯ï¼š `æˆªå›¾æ—§çš„é¡µé¢` -> `æ‰§è¡Œcallbackæ”¹å˜é¡µé¢çŠ¶æ€` -> `ç”¨æ–°çš„çŠ¶æ€æ¸²æŸ“é¡µé¢å¹¶å®æ—¶åˆ‡æ¢`

APIä¼šåœ¨é¡µé¢åˆ‡æ¢çš„è¿‡ç¨‹ä¸­æ„å»ºå‡ºä»¥ä¸‹ä¼ªå…ƒç´ æ ‘ï¼Œå…¶ä¸­`::view-transition-old`ä¸ºæ›´æ”¹çŠ¶æ€ä¹‹å‰çš„å…ƒç´ å†…å®¹ï¼Œ`::view-transition-new`ä¸ºæ›´æ”¹çŠ¶æ€ä¹‹åçš„å…ƒç´ å†…å®¹

```text
::view-transition
â””â”€ ::view-transition-group(root)
   â””â”€ ::view-transition-image-pair(root)
      â”œâ”€ ::view-transition-old(root)
      â””â”€ ::view-transition-new(root)
```


## ä½¿ç”¨JSæ§åˆ¶åŠ¨ç”»

æ‰§è¡ŒstartViewTransitionè¿”å›çš„transitionå¯¹è±¡ï¼Œé€šè¿‡transition.readyå¯ä»¥åœ¨ä¼ªå…ƒç´ åˆ›å»ºå¹¶ä¸”å³å°†å¼€å§‹æ’­æ”¾åŠ¨ç”»æ—¶è§¦å‘

```js
const transition = document.startViewTransition(() => {
    // update DOM status
});

// ç­‰å¾…ä¼ªå…ƒç´ åˆ›å»ºå®Œæˆï¼š
transition.ready.then(() => {
// æ–°è§†å›¾çš„æ ¹å…ƒç´ åŠ¨ç”»
    const width = window.innerWidth;
    const height = window.innerHeight;
    const buffer = width * 0.1;
    document.documentElement.animate(
        {
            clipPath: [
                `path('M ${-width} 0 L 0,0 L ${-buffer},${height} L ${-width - buffer * 2},${height}')`,
                `path('M 0 0 L ${width + buffer},0 L ${width},${height} L ${-buffer},${height}')`,
            ],
        },
        {
            duration: 500,
            easing: 'linear',
            pseudoElement: '::view-transition-new(root)',
        },
    );
});
```

é€šè¿‡ä¸Šé¢è¿™æ®µä»£ç å³å¯å®ç°ç±»ä¼¼äº TDesign çš„è¿‡æ¸¡åŠ¨ç”»æ•ˆæœ

 ğŸ‘‰ğŸ» <a href="/cssè¿‡æ¸¡åŠ¨ç”»/index.html" target="_blank">æŸ¥çœ‹æ‡’åŠ è½½æ•ˆæœ</a>

:::info æ³¨æ„
æœ‰ä¸€ç‚¹å€¼å¾—æ³¨æ„çš„ï¼Œæ‰§è¡Œ startViewTransition æ—¶é¡µé¢æˆªå›¾ï¼Œæ—§çš„é¡µé¢çŠ¶æ€ä¸ä¼šå†åˆ·æ–°äº†ï¼Œ ä¹‹å‰çš„åŠ¨ç”»ç­‰å…¶ä»–æ•ˆæœä¹Ÿä¸ä¼šå†å˜åŒ–ã€‚è¿™ç‚¹å¯ä»¥åœ¨ TDesign åˆ‡æ¢ä¸»é¢˜æ—¶çœ‹åˆ°ï¼Œ å½“åˆ‡æ¢ä¸»é¢˜æ—¶ï¼Œæ—§çš„é¡µé¢ä¸­çš„gifå›¾ç‰‡åœæ­¢æ’­æ”¾ï¼Œä½†æ˜¯æ–°çš„é¡µé¢ä¸­çš„gifå›¾ç‰‡ç»§ç»­æ’­æ”¾
:::

## å…¶ä»–åº”ç”¨åœºæ™¯

åœ¨SPAåº”ç”¨ä¸­ï¼Œè·¯ç”±åˆ‡æ¢æ—¶é€šå¸¸åŸå§‹çš„é¡µé¢å°±è¢«é”€æ¯äº†ï¼Œæ— æ³•åšåˆ°(vueå¯ä»¥)æ–°çš„é¡µé¢ç›–åœ¨æ—§çš„é¡µé¢ä¸Šï¼Œå›é€€æ—¶æ–°çš„é¡µé¢å¼¹å‡ºï¼Œæ—§çš„é¡µé¢å±•ç¤ºåˆ°é¡¶å±‚æ¥è¿™ç§æ•ˆæœã€‚ä½¿ç”¨ `View Transitions API` å°±å¾ˆå®¹æ˜“å®ç°è¿™ä¸ªåŠŸèƒ½

## å…¼å®¹æ€§

æˆªæ­¢ 2024å¹´04æœˆ28ï¼Œç›®å‰å…¼å®¹æ€§å¾ˆä¸€èˆ¬ï¼Œç”Ÿäº§ç¯å¢ƒåŸºæœ¬ä¸å¯ç”¨ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ä¸€äº›å…¼å®¹æ€§ä»£ç ä¼˜é›…é™çº§

```js
// ä¸æ”¯æŒç›´æ¥æ”¹å˜é¡µé¢çŠ¶æ€
if(!document.startViewTransition){
    // change page status
    return;
}

// è‡ªæŒè¯¥APIä½“éªŒæ›´åŠ 
const transition = document.startViewTransition(() => {
    // change page status
});

```

![](./img/2024-04-28-CSSè¿‡æ¸¡åŠ¨ç”»/view%20transitionå…¼å®¹æ€§.jpg)
